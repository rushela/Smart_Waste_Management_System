# Smart Waste Admin Dashboard - Quick Start Guide

## 🚀 Getting Started

### 1. Start Backend (Port 5000)
```bash
cd backend
npm install
npm run seed    # Create sample data
npm start       # Start server
```

### 2. Start Frontend (Port 5173)
```bash
cd frontend
npm install
npm run dev
```

### 3. Login
- Visit: `http://localhost:5173/login`
- Use test account:
  - **Email**: `admin@admin.com`
  - **Password**: `admin123`
  - **Role**: Select "Admin"

### 4. Access Dashboard
After login, you'll be redirected to: `http://localhost:5173/admin/dashboard`

---

## 📊 Dashboard Pages

### 1. **Dashboard** (`/admin/dashboard`)
Main overview with KPIs and charts showing:
- Total waste collected (last 30 days)
- Total pickups
- Total income
- Outstanding bills
- Waste by area (bar chart)
- Waste by type (pie chart)
- Collection trends (line chart)

**Features:**
- Auto-refresh data
- Export to PDF/Excel buttons

---

### 2. **Waste Reports** (`/admin/waste-reports`)
Detailed waste collection analysis with:
- Date range filters
- Area filter
- Waste type filter
- Granularity (daily/weekly/monthly)
- Trend chart
- Data table

**How to use:**
1. Set filters (from date, to date, area, waste type)
2. Select granularity
3. Click "Apply Filters"
4. View chart and table
5. Click "Export" to download

---

### 3. **User Reports** (`/admin/user-reports`)
Individual user waste and payment history:
- Search users by name/email
- Select user to view details
- Waste generated by type
- Payment history (payments & paybacks)

**How to use:**
1. Type in search box to find user
2. Click on user from list
3. View waste breakdown and payments
4. Charts update automatically

---

### 4. **Payment Reports** (`/admin/payment-reports`)
Financial overview:
- Total income
- Total paybacks
- Outstanding bills
- Date range filters
- Payment breakdown chart
- Detailed table

**How to use:**
1. Set date range
2. Click "Apply"
3. View summary cards
4. See breakdown chart
5. Export if needed

---

### 5. **Custom Reports** (`/admin/custom-reports`)
Save custom report configurations:
- Create report templates
- Set custom filters
- Save for reuse
- Edit/delete configs

**How to use:**
1. Click "New Report"
2. Enter report name
3. Set filters (area, waste type, date range)
4. Click "Save"
5. View saved reports in grid
6. Edit or delete as needed

---

## 🔑 API Endpoints Used

### Authentication
- `POST /api/auth/login` - Login with email/password
- `POST /api/auth/register` - Create new account

### Reports
- `GET /api/reports/summary?from=&to=&area=&wasteType=` - Waste summary
- `GET /api/reports/trends?granularity=monthly&from=&to=` - Trends
- `GET /api/reports/route-efficiency?from=&to=` - Route performance
- `GET /api/reports/user/:id?from=&to=` - User report
- `GET /api/reports/payments?from=&to=` - Payment totals

### Custom Reports
- `POST /api/reports/config` - Create config
- `GET /api/reports/config` - List configs
- `PUT /api/reports/config/:id` - Update config
- `DELETE /api/reports/config/:id` - Delete config

### Export
- `GET /api/reports/export/pdf` - Download PDF
- `GET /api/reports/export/excel` - Download Excel/CSV

---

## 🎨 Design System

### Colors
- **Primary Green**: `#2ECC71` - Success, main actions
- **Secondary Orange**: `#FF8C42` - Highlights, CTAs
- **Gray Scale**: Tailwind defaults for text/backgrounds

### Icons
Using **Lucide React** icons:
- `Trash2` - Waste/collection
- `DollarSign` - Payments
- `Users` - User management
- `LayoutDashboard` - Dashboard
- `FileText` - Reports
- `Download` - Export actions

### Layout
- **Sidebar Navigation**: Fixed left sidebar on desktop
- **Mobile**: Hamburger menu, full-screen overlay
- **Content Area**: Scrollable main content
- **Cards**: White background, gray border, shadow on hover
- **Charts**: Responsive containers, tooltips enabled

---

## 🔒 Authentication & Security

### JWT Token Flow
1. Login sends credentials to backend
2. Backend returns JWT token + user data
3. Token stored in `localStorage`
4. All API requests include token in `Authorization` header
5. If token expired (401), redirect to login

### Protected Routes
All `/admin/*` routes require:
- Valid JWT token
- Role = `admin` or `staff`

Residents cannot access admin dashboard.

---

## 📱 Responsive Design

### Desktop (> 1024px)
- Sidebar visible
- Charts full width
- Tables with all columns

### Tablet (768px - 1024px)
- Sidebar visible
- Responsive charts
- Horizontal scroll on tables

### Mobile (< 768px)
- Hamburger menu
- Collapsible sidebar
- Stacked charts
- Horizontal scroll on tables

---

## 🐛 Troubleshooting

### Problem: "Cannot connect to backend"
**Solution:**
- Verify backend is running: `http://localhost:5000/health`
- Check CORS is enabled in backend
- Inspect browser console for errors

### Problem: "Token expired" / keeps redirecting to login
**Solution:**
- Login again to get new token
- Check backend JWT_SECRET matches
- Clear localStorage and login fresh

### Problem: Charts not showing
**Solution:**
- Check data format in browser DevTools
- Verify API returns data
- Ensure Recharts is installed: `npm install recharts`

### Problem: "No data available"
**Solution:**
- Run seed script: `npm run seed` in backend
- Check MongoDB connection
- Verify filters aren't too restrictive

---

## 📦 Dependencies

### Production
- `react` - UI framework
- `react-router-dom` - Routing
- `axios` - HTTP client
- `recharts` - Charts
- `lucide-react` - Icons
- `date-fns` - Date formatting

### Development
- `typescript` - Type safety
- `vite` - Build tool
- `tailwindcss` - Styling
- `eslint` - Linting

---

## 🎯 Quick Actions

### View Sample Data
1. Login as admin
2. Go to Dashboard
3. See last 30 days of data

### Create Custom Report
1. Navigate to Custom Reports
2. Click "New Report"
3. Name: "North Area Recyclables"
4. Area: "North"
5. Waste Type: "recyclable"
6. Save

### Export Data
1. Go to any report page
2. Apply desired filters
3. Click "Export" or "Excel"
4. File downloads automatically

### Check User Activity
1. Go to User Reports
2. Search for user name
3. Click on user
4. View waste and payment history

---

## 📞 Support

For issues or questions:
1. Check console for errors (F12)
2. Verify backend is running
3. Review this guide
4. Check README.md for detailed docs

---

## ✨ Features at a Glance

✅ JWT Authentication
✅ Role-based Access Control  
✅ Interactive Dashboards
✅ Real-time Data Visualization
✅ Multiple Chart Types
✅ Advanced Filtering
✅ Export to PDF/Excel
✅ Custom Report Configs
✅ Responsive Design
✅ Loading States
✅ Error Handling
✅ Search Functionality

---

## 🚦 Status

- ✅ Backend API - Running on port 5000
- ✅ Frontend App - Running on port 5173
- ✅ Database - MongoDB connected
- ✅ Sample Data - Seeded
- ✅ Authentication - JWT working
- ✅ Charts - Recharts loaded
- ✅ All Pages - Functional

**Everything is ready to use!** 🎉
